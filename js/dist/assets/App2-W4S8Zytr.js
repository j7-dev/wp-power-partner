import{t as n,r as p,h as i,l as d,j as m}from"./main-CZA5gs2C.js";import{a6 as u,ah as h,a7 as l,al as b,am as f,aq as A,af as w,ad as j,ar as T}from"./index-BxFCgh1e.js";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const C={status:100,message:"un-login",data:null},c=globalThis.jotaiAtomCache.get("C:\\laragon\\www\\ltest\\wp-content\\plugins\\power-partner\\js\\src\\pages\\UserApp\\atom.tsx/identityAtom",u(C));c.debugLabel="identityAtom";const r=globalThis.jotaiAtomCache.get("C:\\laragon\\www\\ltest\\wp-content\\plugins\\power-partner\\js\\src\\pages\\UserApp\\atom.tsx/globalLoadingAtom",u({isLoading:!1,label:""}));r.debugLabel="globalLoadingAtom";globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const L=()=>{var g;const e=h(c),t=l(r),s=((g=e.data)==null?void 0:g.partner_id)||"",{tableProps:o,result:a}=b({resource:"apps",defaultParams:{user_id:s,customer_id:n.toString()},queryOptions:{enabled:!!s&&!!n}});return p.useEffect(()=>{a!=null&&a.isFetching||t({isLoading:!1,label:""})},[a==null?void 0:a.isFetching]),i(f,{tableProps:o})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const x=()=>{const e=l(c),t=l(r);return A({queryKey:["identity"],queryFn:()=>(t({isLoading:!0,label:"正在獲取用戶資料..."}),w.get("/power-partner/partner-id")),onError:o=>{console.log("err",o)},onSuccess:o=>{const a=o==null?void 0:o.data;e(a),(a==null?void 0:a.status)!==200&&j.error({message:a==null?void 0:a.message,description:d(JSON.stringify((a==null?void 0:a.data)||""))})},staleTime:1e3*60*60*24,cacheTime:1e3*60*60*24})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};const y=()=>{const{isLoading:e}=x();if(!n)return i("p",{children:"請先登入以便查看站台資訊"});const t=h(r),s=h(c),o=s==null?void 0:s.data,a=s==null?void 0:s.status;return i("div",{className:"flex min-h-[12rem]",children:m(T,{size:"large",wrapperClassName:"w-full",spinning:(t==null?void 0:t.isLoading)||e,tip:t!=null&&t.isLoading?t==null?void 0:t.label:"Loading...",children:[a===200&&o&&i(L,{}),(a===500||!o)&&i("p",{children:"OOPS! something went wrong! "})]})})};globalThis.jotaiAtomCache=globalThis.jotaiAtomCache||{cache:new Map,get(e,t){return this.cache.has(e)?this.cache.get(e):(this.cache.set(e,t),t)}};function q(){return i(y,{})}export{q as default};
//# sourceMappingURL=App2-W4S8Zytr.js.map
